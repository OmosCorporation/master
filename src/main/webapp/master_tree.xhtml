<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title><h:outputText value="#{TreeNotePage.pageTabName}" /></title>
        <h:outputStylesheet library="css" name="custom_tree.css"/>
        <h:outputStylesheet library="css" name="omos_basic.css"/>
    </h:head>
    <h:body>
            <h:form id="tree_form">
                <!--addNode-->
                <p:commandButton class="function_head_btn" value="AddNode" actionListener="#{TreeNotePage.addRote()}"  update="tree_form:treeBodyArea" style=" text-align: left!important;"/>
                <!--Node Expand Button-->
                <p:commandButton  id="expandBtn" class="function_head_btn"
                               value="#{TreeNotePage.getExpandModeName()}" 
                               actionListener="#{TreeNotePage.changeExpandlMode()}" 
                               update="tree_form:treeBodyArea tree_form:expandBtn"/>
                
                <p:tree id="treeBodyArea" class="ui-tree-custom" dynamic="true" animate="true"  
                                value="#{TreeNotePage.root}"  cache="true" var="note" datakey="#{note.noteRid}"
                                selectionMode="single"  selection="#{TreeNotePage.selectedNode}">
                    <p:ajax event="expand" listener="#{TreeNotePage.expandTreeNode(note)}" />
                    <p:ajax event="collapse" listener="#{TreeNotePage.collapseTreeNode(note)}" />

                    <p:treeNode id="treenode" styleClass="custom-tree-node" >
                        <label for='treenode'>
                        <!--Text Area-->
                            <p:inputText id="noteTextArea_#{note.noteTitle}" class="noteTextAreaClass" value="#{note.noteTitle}" size="40" maxlength="1000" >
                                <p:ajax event="click" listener="#{TreeNotePage.setEditTarget(note)}" update="tree_TextFrom"/>
                                <p:ajax event="change" listener="#{TreeNotePage.updateNode(note)}"/>
                            </p:inputText>
                        </label>
<!--                        <p:tooltip for="treenode"  position="top" value="test tooltip">
                        </p:tooltip>-->
                    </p:treeNode>
                </p:tree>
                <p:contextMenu for="treeBodyArea">
                    <p:menuitem value="add new node" update="treeBodyArea" action="#{TreeNotePage.addNode}"
                                icon="pi pi-times"/>
                    <p:menuitem value="Delete node" update="treeBodyArea" action="#{TreeNotePage.deleteNode}"
                                icon="pi pi-times"/>
                </p:contextMenu>
                
            </h:form>
            <!--editArea-->
            <h:form id="tree_TextFrom" class="tree_TextFormClass">
                <div class="edit_area_title">
                    <h:outputText class="edit_area_title_text" value="#{TreeNotePage.editTargetNote.noteTitle}"/>
                </div>
                <p:inputTextarea id="noteTextEditArea" class="targetClass_TextEditArea" 
                                 cols="50" rows="30" maxlength="100000" 
                                 value="#{TreeNotePage.editTargetNote.noteText}">
                    <p:ajax event="change" listener="#{TreeNotePage.updateEditTarget()}"/>
                </p:inputTextarea>
            </h:form>
    </h:body>
</html>
